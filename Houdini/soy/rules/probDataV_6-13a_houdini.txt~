#Soybean plant L-System
#Basic symbols to know: 
#  F - one default segment length
#  F(1.5) - one segment of length 1.5
#  H - one default segment half-length
#  J - instance of “berry” (cotyledon) geometry
#  K(scale,0,leaf#,leafWidth,leafHeight) - instance of leaf geometry
#  t - generation number
#  T - apply gravity
#  b - manually set in the L-system values to generate a different id for each plant
#  e - internally defined whole number generation

#Future generations alternate left and right
#  internode length generated by identical calls to poly inside F()
#  petiole 1 angle generated by identical calls to poly inside [] square brackets
A(e) = \(90)H((16.8333+65.2394*e+-18.3373*e*e+1.35185*e*e*e)+(((53.5267+-32.5712*e+7.99373*e*e+-0.549352*e*e*e))*0.57735026919)*((rand(e*500+b+900)+rand(e*500+b+1000)+rand(e*500+b+1100)+rand(e*500+b+1200)-2)/2),4.0/(t/10+1))\(90)H((16.8333+65.2394*e+-18.3373*e*e+1.35185*e*e*e)+(((53.5267+-32.5712*e+7.99373*e*e+-0.549352*e*e*e))*0.57735026919)*((rand(e*500+b+900)+rand(e*500+b+1000)+rand(e*500+b+1100)+rand(e*500+b+1200)-2)/2),4.0/(t/10+1))[+((64.3333+-5.96296*e+0.05555555*e*e+0.0185185*e*e*e)+(((64.3333+-5.96296*e+0.05555555*e*e+0.0185185*e*e*e)*c)*0.57735026919)*((rand(e*500+b+100)+rand(e*500+b+200)+rand(e*500+b+300)+rand(e*500+b+400)-2)/2))Q(e)]  [Y(e)]  A(e+1)

#Structure of the trifoliate leaves
#  petiole length generated by call to poly() and divided by ten to convert to millimeters
#  petioliole length hard-coded to 34
#  petiole 2 angle hard-coded to 175
#  leaf width hard-coded to 5.0
#  leaf height hard-coded to 9.8
Q(e) = !TF((93.3333+-2.86376*e+11.5079*e*e+-1.34259*e*e*e)+(((93.3333+-2.86376*e+11.5079*e*e+-1.34259*e*e*e)*c)*0.57735026919)*((rand(e*500+b+1300)+rand(e*500+b+1400)+rand(e*500+b+1500)+rand(e*500+b+1600)-2)/2))[!^((rand(e*500+b)*59.773+71.202))+(180-175+((175*c)*0.57735026919)*((rand(e*500*3+b*3+n+500)+rand(e*500*3+b*3+n+600)+rand(e*500*3+b*3+n+700)+rand(e*500*3+b*3+n+800)-2)/2))TF(34+((34*c)*0.57735026919)*((rand(e*500*3+b*3+n+1700)+rand(e*500*3+b*3+n+1800)+rand(e*500*3+b*3+n+1900)+rand(e*500*3+b*3+n+2000)-2)/2))+(180-(rand(e*500+b)*50+157))TK(1,0,1,(54.01+-9.81631*e+5.2775*e*e+-0.753333*e*e*e)+(((54.01+-9.81631*e+5.2775*e*e+-0.753333*e*e*e)*c)*0.57735026919)*((rand(e*500+b+2500)+rand(e*500+b+2600)+rand(e*500+b+2700)+rand(e*500+b+2800)-2)/2),(46.15+18.7056*e+-2.04095*e*e+-0.182222*e*e*e)+(((46.15+18.7056*e+-2.04095*e*e+-0.182222*e*e*e)*c)*0.57735026919)*((rand(e*500+b+2100)+rand(e*500+b+2200)+rand(e*500+b+2300)+rand(e*500+b+2400)-2)/2))][!&((rand(e*500+b)*64.486+62.317))+(180-175+((175*c)*0.57735026919)*((rand(e*500*3+b*3+n+500)+rand(e*500*3+b*3+n+600)+rand(e*500*3+b*3+n+700)+rand(e*500*3+b*3+n+800)-2)/2))TF(34+((34*c)*0.57735026919)*((rand(e*500*3+b*3+n+1700)+rand(e*500*3+b*3+n+1800)+rand(e*500*3+b*3+n+1900)+rand(e*500*3+b*3+n+2000)-2)/2))+(180-(rand(e*500+b)*50+157))TK(1,0,2,(69.9867+-27.9893*e+10.5274*e*e+-1.20324*e*e*e)+(((69.9867+-27.9893*e+10.5274*e*e+-1.20324*e*e*e)*c)*0.57735026919)*((rand(e*500+b+3300)+rand(e*500+b+3400)+rand(e*500+b+3500)+rand(e*500+b+3600)-2)/2),(81.0633+-27.5617*e+13.3214*e*e+-1.6612*e*e*e)+(((81.0633+-27.5617*e+13.3214*e*e+-1.6612*e*e*e)*c)*0.57735026919)*((rand(e*500+b+2900)+rand(e*500+b+3000)+rand(e*500+b+3100)+rand(e*500+b+3200)-2)/2))][!^((rand(e*500+b)*26.713))+(180-175+((175*c)*0.57735026919)*((rand(e*500*3+b*3+n+500)+rand(e*500*3+b*3+n+600)+rand(e*500*3+b*3+n+700)+rand(e*500*3+b*3+n+800)-2)/2))TF(34+((34*c)*0.57735026919)*((rand(e*500*3+b*3+n+1700)+rand(e*500*3+b*3+n+1800)+rand(e*500*3+b*3+n+1900)+rand(e*500*3+b*3+n+2000)-2)/2))+(180-(rand(e*500+b)*50+157))TK(1,0,3,(69.23+-25.3594*e+10.1417*e*e+-1.20611*e*e*e)+(((69.23+-25.3594*e+10.1417*e*e+-1.20611*e*e*e)*c)*0.57735026919)*((rand(e*500+b+4100)+rand(e*500+b+4200)+rand(e*500+b+4300)+rand(e*500+b+4400)-2)/2),(73.6167+-3.37053*e+5.74206*e*e+-0.977407*e*e*e)+(((73.6167+-3.37053*e+5.74206*e*e+-0.977407*e*e*e)*c)*0.57735026919)*((rand(e*500+b+3700)+rand(e*500+b+3800)+rand(e*500+b+3900)+rand(e*500+b+4000)-2)/2))]

Y(e) = +(15)^(30)J(1,0,-1,1,1):1
